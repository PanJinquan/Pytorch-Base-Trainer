

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>basetrainer.utils package &mdash; pytorch-base-trainer V0.6.0 文档</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pytorch-base-trainer
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">basetrainer.utils package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-basetrainer.utils.file_utils">basetrainer.utils.file_utils module</a></li>
<li><a class="reference internal" href="#module-basetrainer.utils.image_utils">basetrainer.utils.image_utils module</a></li>
<li><a class="reference internal" href="#module-basetrainer.utils.log">basetrainer.utils.log module</a></li>
<li><a class="reference internal" href="#module-basetrainer.utils.plot_utils">basetrainer.utils.plot_utils module</a></li>
<li><a class="reference internal" href="#module-basetrainer.utils.setup_config">basetrainer.utils.setup_config module</a></li>
<li><a class="reference internal" href="#module-basetrainer.utils.summary">basetrainer.utils.summary module</a></li>
<li><a class="reference internal" href="#module-basetrainer.utils.torch_data">basetrainer.utils.torch_data module</a></li>
<li><a class="reference internal" href="#module-basetrainer.utils.torch_tools">basetrainer.utils.torch_tools module</a></li>
<li><a class="reference internal" href="#module-basetrainer.utils">Module contents</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pytorch-base-trainer</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>basetrainer.utils package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/basetrainer.utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="basetrainer-utils-package">
<h1>basetrainer.utils package<a class="headerlink" href="#basetrainer-utils-package" title="永久链接至标题">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="module-basetrainer.utils.file_utils">
<span id="basetrainer-utils-file-utils-module"></span><h2>basetrainer.utils.file_utils module<a class="headerlink" href="#module-basetrainer.utils.file_utils" title="永久链接至标题">¶</a></h2>
<p># ——————————————————–
# &#64;Author : panjq
# &#64;E-mail : <a class="reference external" href="mailto:pan_jinquan&#37;&#52;&#48;163&#46;com">pan_jinquan<span>&#64;</span>163<span>&#46;</span>com</a>
# &#64;Date   : 2019-12-31 09:11:25
# ——————————————————–</p>
<dl class="py class">
<dt id="basetrainer.utils.file_utils.WriterTXT">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">WriterTXT</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'w'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.WriterTXT" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>write data in txt files</p>
<dl class="py method">
<dt id="basetrainer.utils.file_utils.WriterTXT.close">
<code class="sig-name descname"><span class="pre">close</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.WriterTXT.close" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="basetrainer.utils.file_utils.WriterTXT.write_line_list">
<code class="sig-name descname"><span class="pre">write_line_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\n'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.WriterTXT.write_line_list" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="basetrainer.utils.file_utils.WriterTXT.write_line_str">
<code class="sig-name descname"><span class="pre">write_line_str</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\n'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.WriterTXT.write_line_str" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.check_files">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">check_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sizeTh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1024</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isRemove</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.check_files" title="永久链接至目标">¶</a></dt>
<dd><p>去除不存的文件和文件过小的文件列表
:param files_list:
:param sizeTh: 文件大小阈值,单位：字节B，默认1000B ,33049513/1024/1024=33.0MB
:param isRemove: 是否在硬盘上删除被损坏的原文件
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.combine_flags">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">combine_flags</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flags</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.combine_flags" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flags</strong> – </p></li>
<li><p><strong>info</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.copy_dir">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">copy_dir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.copy_dir" title="永久链接至目标">¶</a></dt>
<dd><p>copy src-directory to dst-directory, will cover the same files</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.copy_dir_delete">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">copy_dir_delete</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.copy_dir_delete" title="永久链接至目标">¶</a></dt>
<dd><p>copy src directory to dst directory,will detete the dst same directory
:param src:
:param dst:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.copy_dir_multi_thread">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">copy_dir_multi_thread</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sync_source_root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sync_dest_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.copy_dir_multi_thread" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sync_source_dir</strong> – </p></li>
<li><p><strong>sync_dest_dir</strong> – </p></li>
<li><p><strong>dataset</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.copy_file">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">copy_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">srcfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dstfile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.copy_file" title="永久链接至目标">¶</a></dt>
<dd><p>copy src file to dst file
:param srcfile:
:param dstfile:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.copy_file_to_dir">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">copy_file_to_dir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">srcfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">des_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.copy_file_to_dir" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.create_dir">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">create_dir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.create_dir" title="永久链接至目标">¶</a></dt>
<dd><p>create directory
:param parent_dir:
:param dir1:
:param filename:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.create_file_path">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">create_file_path</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.create_file_path" title="永久链接至目标">¶</a></dt>
<dd><p>create file in path
:param filename:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.decode_label">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">decode_label</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.decode_label" title="永久链接至目标">¶</a></dt>
<dd><p>根据name_table解码label
:param label_list:
:param name_table:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.encode_label">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">encode_label</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unknow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.encode_label" title="永久链接至目标">¶</a></dt>
<dd><p>根据name_table，编码label
:param name_list:
:param name_table:
:param unknow :未知的名称，默认label为0,一般在name_table中index=0是背景，未知的label也当做背景处理
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_all_files">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_all_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_all_files" title="永久链接至目标">¶</a></dt>
<dd><p>获取file_dir目录下，所有文本路径，包括子目录文件</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_basename">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_basename</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_basename" title="永久链接至目标">¶</a></dt>
<dd><p>get files basename
:param file_list:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_files_id">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_files_id</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_files_id" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>file_list</strong> – </p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_files_labels">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_files_labels</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['*.png',</span> <span class="pre">'*.jpg']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_files_labels" title="永久链接至目标">¶</a></dt>
<dd><p>获取files_dir路径下所有文件路径，以及labels,其中labels用子级文件名表示
files_dir目录下，同一类别的文件放一个文件夹，其labels即为文件的名
:param file_dir:
:postfix 后缀名
:return:file_list所有文件的路径,label_list对应的labels</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_files_list">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_files_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_files_list" title="永久链接至目标">¶</a></dt>
<dd><p>获得file_dir目录下，后缀名为postfix所有文件列表，包括子目录所有文件
:param file_dir:
:param prefix: 前缀
:param postfix: 后缀
:param basename: 返回的列表是文件名（True），还是文件的完整路径(False)
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_files_list_v2">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_files_list_v2</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_files_list_v2" title="永久链接至目标">¶</a></dt>
<dd><p>获取file_dir目录下，所有文本路径，但不包括子目录文件
:param file_dir:
:param prefix: 前缀
:param postfix: 后缀
:param basename: 返回的列表是文件名（True），还是文件的完整路径(False)
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_files_lists">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_files_lists</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['*.jpg',</span> <span class="pre">'*.png']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_files_lists" title="永久链接至目标">¶</a></dt>
<dd><p>读取文件和列表: list,*.txt ,image path, directory
:param file_dir: list,*.txt ,image path, directory
:param subname: “JPEGImages”
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_images_list">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_images_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['*.png',</span> <span class="pre">'*.jpg']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_images_list" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_dir</strong> – </p></li>
<li><p><strong>prefix</strong> – 前缀</p></li>
<li><p><strong>postfix</strong> – 后缀</p></li>
<li><p><strong>basename</strong> – 返回的列表是文件名（True），还是文件的完整路径(False)</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_kwargs_name">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_kwargs_name</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_kwargs_name" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_loacl_eth">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_loacl_eth</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_loacl_eth" title="永久链接至目标">¶</a></dt>
<dd><p>想要获取linux设备网卡接口，并用列表进行保存
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_loacl_eth2">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_loacl_eth2</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_loacl_eth2" title="永久链接至目标">¶</a></dt>
<dd><p>想要获取linux设备网卡接口，并用列表进行保存
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_prefix_files">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_prefix_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_prefix_files" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_dir</strong> – </p></li>
<li><p><strong>prefix</strong> – “best*”</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_set_inter_union_diff">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_set_inter_union_diff</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">set1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_set_inter_union_diff" title="永久链接至目标">¶</a></dt>
<dd><p>intersection(交集),union(并集),difference(差集)
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_sub_list">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_sub_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dirname</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_sub_list" title="永久链接至目标">¶</a></dt>
<dd><p>去除父路径,获得子路径:file_list = file_list - dirname
:param file_list:
:param parent:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_sub_paths">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_sub_paths</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_sub_paths" title="永久链接至目标">¶</a></dt>
<dd><p>当前路径下所有子目录
:param input_dir:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.get_time">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">get_time</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'S'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.get_time" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>format</strong> – </p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.is_float">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">is_float</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.is_float" title="永久链接至目标">¶</a></dt>
<dd><p>判断是否为整数和小数
:param str:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.is_int">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">is_int</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.is_int" title="永久链接至目标">¶</a></dt>
<dd><p>判断是否为整数
:param str:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.list2dict">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">list2dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.list2dict" title="永久链接至目标">¶</a></dt>
<dd><p>convert list to dict
:param data:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.list2str">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">list2str</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.list2str" title="永久链接至目标">¶</a></dt>
<dd><p>convert list to string
:param content_list:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.merge_dir">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">merge_dir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merge_same</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.merge_dir" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.merge_files">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">merge_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.merge_files" title="永久链接至目标">¶</a></dt>
<dd><p>合并文件列表
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.move_file">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">move_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">srcfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dstfile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.move_file" title="永久链接至目标">¶</a></dt>
<dd><p>移动文件或重命名</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.move_file_to_dir">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">move_file_to_dir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">srcfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">des_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.move_file_to_dir" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.multi_thread_task">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">multi_thread_task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_processes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_bad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Async</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.multi_thread_task" title="永久链接至目标">¶</a></dt>
<dd><p>多线程处理content_list的数据
Usage:</p>
<blockquote>
<div><dl class="simple">
<dt>def task_fun(item, save_root):</dt><dd><p>‘’’
:param item: 对应content_list的每一项item
:param save_root: 对应kwargs
:return:
‘’’
pass</p>
</dd>
<dt>multi_thread_task(content_list,</dt><dd><p>func=task_fun,
num_processes=num_processes,
remove_bad=remove_bad,
Async=Async,
save_root=save_root)</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content_list</strong> – content_list</p></li>
<li><p><strong>func</strong> – func：task function</p></li>
<li><p><strong>num_processes</strong> – 开启线程个数</p></li>
<li><p><strong>remove_bad</strong> – 是否去除下载失败的数据</p></li>
</ul>
</dd>
</dl>
<p>:param Async:是否异步
:param kwargs:需要传递给func的相关参数
:return: 返回图片的存储地址列表</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.parser_classes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">parser_classes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.parser_classes" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">返回</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.print_dict">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">print_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dict_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.print_dict" title="永久链接至目标">¶</a></dt>
<dd><p>print dict info
:param dict_data:
:param save_path:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.randam_select_images">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">randam_select_images</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nums</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.randam_select_images" title="永久链接至目标">¶</a></dt>
<dd><p>randam select nums images
:param image_list:
:param nums:
:param shuffle:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.read_data">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">read_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span> <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convertNum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.read_data" title="永久链接至目标">¶</a></dt>
<dd><blockquote>
<div><p>读取txt数据函数
:param filename:文件名
:param split   :分割符
:param convertNum :是否将list中的string转为int/float类型的数字
:return: txt的数据列表
Python中有三个去除头尾字符、空白符的函数，它们依次为:
strip： 用来去除头尾字符、空白符(包括</p>
</div></blockquote>
<p>、
、       、’ ‘，即：换行、回车、制表符、空格)</p>
<blockquote>
<div><p>lstrip：用来去除开头字符、空白符(包括</p>
</div></blockquote>
<p>、
、       、’ ‘，即：换行、回车、制表符、空格)</p>
<blockquote>
<div><p>rstrip：用来去除结尾字符、空白符(包括</p>
</div></blockquote>
<p>、
、       、’ ‘，即：换行、回车、制表符、空格)</p>
<blockquote>
<div><p>注意：这些函数都只会删除头和尾的字符，中间的不会删除。</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.read_json_data">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">read_json_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.read_json_data" title="永久链接至目标">¶</a></dt>
<dd><p>读取数据
:param json_path:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.read_line_image_label">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">read_line_image_label</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line_image_label</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.read_line_image_label" title="永久链接至目标">¶</a></dt>
<dd><p>line_image_label:[image_id,boxes_nums,x1, y1, w, h, label_id,x1, y1, w, h, label_id,…]
:param line_image_label:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.read_lines_image_labels">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">read_lines_image_labels</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.read_lines_image_labels" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>filename</strong> – </p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.read_pair_data">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">read_pair_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.read_pair_data" title="永久链接至目标">¶</a></dt>
<dd><p>read pair data,data:[image1.jpg image2.jpg 0]
:param filename:
:param split:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.remove_dir">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">remove_dir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.remove_dir" title="永久链接至目标">¶</a></dt>
<dd><p>remove directory
:param dir:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.remove_file">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">remove_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.remove_file" title="永久链接至目标">¶</a></dt>
<dd><p>remove files
:param path:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.remove_file_list">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">remove_file_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.remove_file_list" title="永久链接至目标">¶</a></dt>
<dd><p>remove file list
:param file_list:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.remove_prefix_files">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">remove_prefix_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.remove_prefix_files" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_dir</strong> – </p></li>
<li><p><strong>prefix</strong> – “best*”</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.str2bool">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">str2bool</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.str2bool" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.write_data">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">write_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span> <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'w'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.write_data" title="永久链接至目标">¶</a></dt>
<dd><p>保存list[list[]]的数据到txt文件
:param filename:文件名
:param content_list:需要保存的数据,type-&gt;list
:param mode:读写模式:’w’ or ‘a’
:return: void</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.write_json_path">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">write_json_path</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out_json_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">json_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.write_json_path" title="永久链接至目标">¶</a></dt>
<dd><p>写入 JSON 数据
:param out_json_path:
:param json_data:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.file_utils.write_list_data">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.file_utils.</span></code><code class="sig-name descname"><span class="pre">write_list_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'w'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.file_utils.write_list_data" title="永久链接至目标">¶</a></dt>
<dd><p>保存list[]的数据到txt文件，每个元素分行
:param filename:文件名
:param list_data:需要保存的数据,type-&gt;list
:param mode:读写模式:’w’ or ‘a’
:return: void</p>
</dd></dl>

</div>
<div class="section" id="module-basetrainer.utils.image_utils">
<span id="basetrainer-utils-image-utils-module"></span><h2>basetrainer.utils.image_utils module<a class="headerlink" href="#module-basetrainer.utils.image_utils" title="永久链接至标题">¶</a></h2>
<p>&#64;Project: IntelligentManufacture
&#64;File   : image_processing.py
&#64;Author : panjq
&#64;E-mail : <a class="reference external" href="mailto:pan_jinquan&#37;&#52;&#48;163&#46;com">pan_jinquan<span>&#64;</span>163<span>&#46;</span>com</a>
&#64;Date   : 2019-02-14 15:34:50</p>
<dl class="py class">
<dt id="basetrainer.utils.image_utils.CVVideo">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">CVVideo</span></code><a class="headerlink" href="#basetrainer.utils.image_utils.CVVideo" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="basetrainer.utils.image_utils.CVVideo.start_capture">
<code class="sig-name descname"><span class="pre">start_capture</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">video_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_video</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detect_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.CVVideo.start_capture" title="永久链接至目标">¶</a></dt>
<dd><p>start capture video
:param video_path: <em>.avi,</em>.mp4,…
:param save_video: <a href="#id1"><span class="problematic" id="id2">*</span></a>.avi
:param detect_freq:
:return:</p>
</dd></dl>

<dl class="py method">
<dt id="basetrainer.utils.image_utils.CVVideo.task">
<code class="sig-name descname"><span class="pre">task</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.CVVideo.task" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="basetrainer.utils.image_utils.CVVideo.write_video">
<code class="sig-name descname"><span class="pre">write_video</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.CVVideo.write_video" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="basetrainer.utils.image_utils.EventCv">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">EventCv</span></code><a class="headerlink" href="#basetrainer.utils.image_utils.EventCv" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="basetrainer.utils.image_utils.EventCv.add_mouse_event">
<code class="sig-name descname"><span class="pre">add_mouse_event</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">winname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callbackFunc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.EventCv.add_mouse_event" title="永久链接至目标">¶</a></dt>
<dd><blockquote>
<div><p>添加点击事件</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>winname</strong> – </p></li>
<li><p><strong>param</strong> – </p></li>
<li><p><strong>callbackFunc</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="basetrainer.utils.image_utils.EventCv.callback_print_image">
<code class="sig-name descname"><span class="pre">callback_print_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.EventCv.callback_print_image" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="basetrainer.utils.image_utils.EventCv.update_image">
<code class="sig-name descname"><span class="pre">update_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.EventCv.update_image" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.addMouseCallback">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">addMouseCallback</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">winname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callbackFunc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.addMouseCallback" title="永久链接至目标">¶</a></dt>
<dd><blockquote>
<div><p>添加点击事件</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>winname</strong> – </p></li>
<li><p><strong>param</strong> – </p></li>
<li><p><strong>callbackFunc</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.bboxes2center">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">bboxes2center</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bboxes_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.bboxes2center" title="永久链接至目标">¶</a></dt>
<dd><p>center = (boxes[:, [0, 1]] + boxes[:, [2, 3]]) / 2
将bboxes=[x1,y1,x2,y2] 转为center_list=[cx,cy,w,h]
:param bboxes_list:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.bboxes2rects">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">bboxes2rects</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bboxes_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.bboxes2rects" title="永久链接至目标">¶</a></dt>
<dd><p>将bboxes=[x1,y1,x2,y2] 转为rect=[x1,y1,w,h]
:param bboxes_list:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.bboxes_protection">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">bboxes_protection</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.bboxes_protection" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> – </p></li>
<li><p><strong>width</strong> – </p></li>
<li><p><strong>height</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.bgr_image2image_base64">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">bgr_image2image_base64</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bgr_image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.bgr_image2image_base64" title="永久链接至目标">¶</a></dt>
<dd><p>image = cv2.imencode(‘.jpeg’, bgr_image)[1]
image_base64 = base64.b64encode(image).decode()
image_base64 = str(base64.b64encode(image), encoding=’utf-8’)</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.bin2image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">bin2image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bin_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_rgb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.bin2image" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.boxes2polygons">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">boxes2polygons</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.boxes2polygons" title="永久链接至目标">¶</a></dt>
<dd><p>将矩形框转为多边形轮廓
:param self:
:param boxes:[num_polygons,4], box is [xmin, ymin, xmax, ymax]
:return: polygons: [num_polygons,num_point,2]</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.center2bboxes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">center2bboxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">center_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.center2bboxes" title="永久链接至目标">¶</a></dt>
<dd><p>将center_list=[cx,cy,w,h] 转为bboxes=[x1,y1,x2,y2]
:param bboxes_list:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.center2rects">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">center2rects</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">center_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.center2rects" title="永久链接至目标">¶</a></dt>
<dd><p>将center_list=[cx,cy,w,h] 转为rect=[x,y,w,h]
:param bboxes_list:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.center_crop">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">center_crop</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[112,</span> <span class="pre">112]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.center_crop" title="永久链接至目标">¶</a></dt>
<dd><p>central_crop
:param image: input numpy type image
:param crop_size:crop_size must less than x.shape[:2]=[crop_h,crop_w]
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.center_crop_padding">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">center_crop_padding</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.center_crop_padding" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>crop_size</strong> – [crop_h,crop_w]</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.circle_line">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">circle_line</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_point</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iscircle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.circle_line" title="永久链接至目标">¶</a></dt>
<dd><p>产生连接线的点,用于绘制连接线
points_line=circle_line(len(points),iscircle=True)
&gt;&gt; [(0, 1), (1, 2), (2, 0)]
:param num_point:
:param iscircle: 首尾是否相连
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.combile_label_prob">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">combile_label_prob</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prob_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.combile_label_prob" title="永久链接至目标">¶</a></dt>
<dd><p>将label_list和prob_list拼接在一起，以便显示
:param label_list:
:param prob_list:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.combime_save_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">combime_save_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.combime_save_image" title="永久链接至目标">¶</a></dt>
<dd><p>命名标准：out_dir/name_prefix.jpg
:param orig_image:
:param dest_image:
:param image_path:
:param out_dir:
:param prefix:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.convert_anchor">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">convert_anchor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">anchors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.convert_anchor" title="永久链接至目标">¶</a></dt>
<dd><p>height, width, _ = image.shape
:param win_name:
:param anchors: &lt;class ‘tuple’&gt;: (nums, 4)
:return: boxes_list:[xmin, ymin, xmax, ymax]</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.custom_bbox_line">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">custom_bbox_line</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbox</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drawType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'custom'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.custom_bbox_line" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>bbox</strong> – </p></li>
<li><p><strong>color</strong> – </p></li>
<li><p><strong>name</strong> – </p></li>
<li><p><strong>drawType</strong> – </p></li>
<li><p><strong>top</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.cv_image_normalization">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">cv_image_normalization</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.cv_image_normalization" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>min_val</strong> – </p></li>
<li><p><strong>max_val</strong> – </p></li>
<li><p><strong>norm_type</strong> – </p></li>
<li><p><strong>dtype</strong> – </p></li>
<li><p><strong>mask</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.cv_paste_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">cv_paste_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_point</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.cv_paste_image" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> – </p></li>
<li><p><strong>start_point</strong> – </p></li>
<li><p><strong>mask</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.cv_rotate">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">cv_rotate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.cv_rotate" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.cv_show_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">cv_show_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_rgb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waitKey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.cv_show_image" title="永久链接至目标">¶</a></dt>
<dd><p>调用OpenCV显示RGB图片
:param title: 图像标题
:param image: 输入是否是RGB图像
:param type:’rgb’ or ‘bgr’
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.data_normalization">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">data_normalization</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.data_normalization" title="永久链接至目标">¶</a></dt>
<dd><p>NORMALIZATION 将数据x归一化到任意区间[ymin,omax]范围的方法
:param data:  输入参数x：需要被归一化的数据,numpy
:param omin: 输入参数omin：归一化的区间[omin,omax]下限
:param omax: 输入参数ymax：归一化的区间[omin,omax]上限
:param imin: 输入参数imin的最小值
:param imax: 输入参数ymax的最大值
:return: 输出参数y：归一化到区间[omin,omax]的数据</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_dt_gt_dets">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_dt_gt_dets</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt_boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt_label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gt_boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gt_label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vis_diff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_dt_gt_dets" title="永久链接至目标">¶</a></dt>
<dd><p>显示ground true和Detection bbox
:param image:
:param dt_boxes:
:param dt_label:
:param gt_boxes:
:param gt_label:
:param vis_diff: 是否显示差异，</p>
<blockquote>
<div><dl class="simple">
<dt>vis_diff=True :使用不同颜色标记gt_label和dt_label的差异</dt><dd><p>要求len(gt_label) == len(dt_label)</p>
</dd>
<dt>vis_diff=False:使用不同颜色显示dt_boxes和gt_boxes</dt><dd><p>dt_boxes和gt_boxes的长度任意</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">返回</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_arrowed_lines">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_arrowed_lines</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pointline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">255)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_arrowed_lines" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_bboxes_text">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_bboxes_text</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rgb_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxes_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drawType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'custom'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_bboxes_text" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes_name</strong> – </p></li>
<li><p><strong>bgr_image</strong> – bgr image</p></li>
<li><p><strong>color</strong> – BGR color:[B,G,R]</p></li>
<li><p><strong>boxes</strong> – [[x1,y1,x2,y2],[x1,y1,x2,y2]]</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_boxes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_boxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bgr_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxes_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">255)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_boxes" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_contours">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_contours</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contours</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">255,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_contours" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>contours</strong> – List[np.ndarray],每个列表是一个轮廓(num_points,1,2)</p></li>
</ul>
</dd>
</dl>
<p>:param color:绘制轮廓的颜色
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_detection_bboxes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_detection_bboxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rgb_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bboxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_detection_bboxes" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> – </p></li>
<li><p><strong>rgb_image</strong> – </p></li>
<li><p><strong>bboxes</strong> – [[x1,y1,x2,y2],[x1,y1,x2,y2]]</p></li>
<li><p><strong>probs</strong> – </p></li>
<li><p><strong>labels</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_detection_rects">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_detection_rects</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rgb_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_detection_rects" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_fillPoly">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_fillPoly</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">255)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_fillPoly" title="永久链接至目标">¶</a></dt>
<dd><p># points是三维坐标，分别表示(多边形个数，多边形坐标点x,多边形坐标点y)=(num_polylines,num_point,2)
points = np.asarray([[[100, 100], [200, 100], [400, 200]],</p>
<blockquote>
<div><p>[[500, 600], [300, 400], [500, 700]]]
)</p>
</div></blockquote>
<p>cv2.polylines(image,points,True,(255,0,0))  #画任意多边形
参数2 pts：多边形的顶点坐标(按顺序)，points是三维坐标，分别表示(多边形个数，多边形坐标点x,多边形坐标点y)
参数3 isClosed：必选参数。用于设置绘制的折线是否关闭，若设置为True，则从折线的最后一个顶点到其第一个顶点会自动绘制一条线进行闭合。
参数4 color：必选参数。用于设置多边形的颜色
参数5 lineType：可选参数。用于设置线段的类型，可选8（8邻接连接线-默认）、4（4邻接连接线）和cv2.LINE_AA 为抗锯齿</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_lines">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_lines</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pointline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">255)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_lines" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_points_arrowed_lines">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_points_arrowed_lines</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pointline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">texts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drawType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'simple'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_points_arrowed_lines" title="永久链接至目标">¶</a></dt>
<dd><p>在图像中画点箭头线
:param image:
:param points: 点列表
:param pointline: <cite>auto</cite>-&gt;pointline = circle_line(len(points), iscircle=True)
:param color:
:param texts:
:param drawType: simple or custom
:param check:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_points_lines">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_points_lines</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pointline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">texts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">circle_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">255,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">255)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_points_lines" title="永久链接至目标">¶</a></dt>
<dd><p>在图像中画点和连接线
:param image:
:param points: 点列表
:param pointline: <cite>auto</cite>-&gt;pointline = circle_line(len(points), iscircle=True)
:param color:
:param texts:
:param drawType: simple or custom
:param check:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_polylines">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_polylines</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">255)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_polylines" title="永久链接至目标">¶</a></dt>
<dd><p># points是三维坐标，分别表示(多边形个数，多边形坐标点x,多边形坐标点y)=(num_polylines,num_point,2)
points = np.asarray([[[100, 100], [200, 100], [400, 200]],</p>
<blockquote>
<div><p>[[500, 600], [300, 400], [500, 700]]]
)</p>
</div></blockquote>
<p>cv2.polylines(image,points,True,(255,0,0))  #画任意多边形
参数2 pts：多边形的顶点坐标(按顺序)，points是三维坐标，分别表示(多边形个数，多边形坐标点x,多边形坐标点y)
参数3 isClosed：必选参数。用于设置绘制的折线是否关闭，若设置为True，则从折线的最后一个顶点到其第一个顶点会自动绘制一条线进行闭合。
参数4 color：必选参数。用于设置多边形的颜色
参数5 lineType：可选参数。用于设置线段的类型，可选8（8邻接连接线-默认）、4（4邻接连接线）和cv2.LINE_AA 为抗锯齿</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_rects">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_rects</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bgr_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rect_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">255)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_rects" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_image_rects_text">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_image_rects_text</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rgb_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rects_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drawType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'custom'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_image_rects_text" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_key_point_arrowed_in_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_key_point_arrowed_in_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pointline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_key_point_arrowed_in_image" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key_points</strong> – list(ndarray(19,2)) or ndarray(n_person,19,2)</p></li>
<li><p><strong>image</strong> – </p></li>
</ul>
</dd>
</dl>
<p>:param pointline:[[start–&gt;end]]
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_key_point_in_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_key_point_in_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pointline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vis_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">circle_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">255,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">255)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_key_point_in_image" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key_points</strong> – list(ndarray(19,2)) or ndarray(n_person,19,2)</p></li>
<li><p><strong>image</strong> – </p></li>
<li><p><strong>pointline</strong> – <cite>auto</cite>-&gt;pointline = circle_line(len(points), iscircle=True)</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_landmark">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_landmark</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">landmarks_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">255)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vis_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_landmark" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_points_text">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_points_text</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">texts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(255,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drawType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'simple'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_points_text" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>points</strong> – </p></li>
<li><p><strong>texts</strong> – </p></li>
<li><p><strong>color</strong> – </p></li>
<li><p><strong>drawType</strong> – custom or simple</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_text">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_text</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bg_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(255,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drawType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'custom'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_text" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>point</strong> – </p></li>
<li><p><strong>text</strong> – </p></li>
<li><p><strong>drawType</strong> – custom or simple</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_text_line">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_text_line</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_line</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bg_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(255,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drawType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'custom'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_text_line" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>point</strong> – </p></li>
<li><p><strong>text</strong> – </p></li>
<li><p><strong>drawType</strong> – custom or custom</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_text_pil">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_text_pil</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(255,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_text_pil" title="永久链接至目标">¶</a></dt>
<dd><p>支持显示中文
:param image:
:param point:
:param text:
:param size:
:param color_color:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_yaw_pitch_roll_in_left_axis">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_yaw_pitch_roll_in_left_axis</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yaw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pitch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roll</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">75</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_yaw_pitch_roll_in_left_axis" title="永久链接至目标">¶</a></dt>
<dd><p>左手坐标</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_yaw_pitch_roll_in_right_axis">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_yaw_pitch_roll_in_right_axis</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yaw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pitch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roll</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">75</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_yaw_pitch_roll_in_right_axis" title="永久链接至目标">¶</a></dt>
<dd><p>右手笛卡尔坐标：<a class="reference external" href="https://blog.csdn.net/a812073479/article/details/100103442">https://blog.csdn.net/a812073479/article/details/100103442</a>
pitch是围绕X轴旋转，也叫做俯仰角，左右耳朵连线构成X轴，如低头，点头动作
yaw是围绕Y轴旋转，也叫偏航角，嘴巴鼻子连线构成Y轴，如左右摇头动作
roll是围绕Z轴旋转，也叫翻滚角，眼睛和后脑勺连线构成Z轴，如歪头动作
XYZ分别用红绿蓝表示，如(-10,0,0)表示绕X轴的反方向旋转10度
:param image: BGR Image
:param yaw:  绿色Y
:param pitch: 红色X
:param roll: 蓝色Z
:param center:
:param vis:
:param size:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.draw_yaws_pitchs_rolls_axis_in_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">draw_yaws_pitchs_rolls_axis_in_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yaws</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pitchs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rolls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">75</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.draw_yaws_pitchs_rolls_axis_in_image" title="永久链接至目标">¶</a></dt>
<dd><p>绘制yaw, pitch, roll坐标轴
:param image:
:param yaws:
:param pitchs:
:param rolls:
:param centers:
:param size:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.extend_bboxes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">extend_bboxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bboxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[1.0,</span> <span class="pre">1.0]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.extend_bboxes" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bboxes</strong> – [[xmin, ymin, xmax, ymax]]</p></li>
<li><p><strong>scale</strong> – [sx,sy]==&gt;(W,H)</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.extend_face2body_bboxes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">extend_face2body_bboxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">faces_boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.extend_face2body_bboxes" title="永久链接至目标">¶</a></dt>
<dd><p>extend boxes ,such as extend faces_boxes to body_boxes
:param faces_boxes:
:param width_factor:
:param height_factor:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.extend_rects">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">extend_rects</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[1.0,</span> <span class="pre">1.0]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.extend_rects" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rects</strong> – </p></li>
<li><p><strong>scale</strong> – [sx,sy]==&gt;(W,H)</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.fast_read_image_roi">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">fast_read_image_roi</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig_rect</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ImreadModes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_rgb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.fast_read_image_roi" title="永久链接至目标">¶</a></dt>
<dd><p>快速读取图片的方法
:param filename: 图片路径
:param orig_rect:原始图片的感兴趣区域rect
:param ImreadModes: IMREAD_UNCHANGED</p>
<blockquote>
<div><p>IMREAD_GRAYSCALE
IMREAD_COLOR
IMREAD_ANYDEPTH
IMREAD_ANYCOLOR
IMREAD_LOAD_GDAL
IMREAD_REDUCED_GRAYSCALE_2
IMREAD_REDUCED_COLOR_2
IMREAD_REDUCED_GRAYSCALE_4
IMREAD_REDUCED_COLOR_4
IMREAD_REDUCED_GRAYSCALE_8
IMREAD_REDUCED_COLOR_8
IMREAD_IGNORE_ORIENTATION</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>normalization</strong> – 是否归一化</p>
</dd>
</dl>
<p>:param use_rgb 输出格式：RGB or BGR
:return: 返回感兴趣区域ROI</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.fig2data">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">fig2data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fig</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.fig2data" title="永久链接至目标">¶</a></dt>
<dd><p>fig = plt.figure()
image = fig2data(fig)
&#64;brief Convert a Matplotlib figure to a 4D numpy array with RGBA channels and return it
&#64;param fig a matplotlib figure
&#64;return a numpy 3D array of RGBA values</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.file2base64">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">file2base64</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.file2base64" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.filtering_scores">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">filtering_scores</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bboxes_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scores_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">score_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.filtering_scores" title="永久链接至目标">¶</a></dt>
<dd><p>filtering low score bbox
:param bboxes_list:
:param scores_list:
:param labels_list:
:param score_threshold:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.find_image_contours">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">find_image_contours</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_label</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">[1,</span> <span class="pre">2]</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#basetrainer.utils.image_utils.find_image_contours" title="永久链接至目标">¶</a></dt>
<dd><p>寻找一个多值Mask图像的轮廓
:param mask: np.ndarray：多值Mask图像
:param target_label:  List[int]，查找区域数值等于target_label的目标轮廓，可指定多个，</p>
<blockquote>
<div><p>为空或这None时，表示查找大于0的轮廓</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">返回</dt>
<dd class="field-odd"><p>返回多值Mask图像的轮廓</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.find_mask_contours">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">find_mask_contours</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.find_mask_contours" title="永久链接至目标">¶</a></dt>
<dd><p>寻找一个二值Mask图像的轮廓
cv2.findContours(mask，mode, method)
mask: 输入mask必须是二值Mask图像，注意黑色表示背景，白色表示物体，即在黑色背景里寻找白色物体的轮廓
mode:</p>
<blockquote>
<div><p>cv.RETR_LIST: 提取所有轮廓
cv.RETR_EXTERNAL: 只提取外轮廓（可能有多个外轮廓，只是不提取孔轮廓）
cv.RETR_TREE: 树形结构表示轮廓的从属关系
cv.RETR_CCOMP: 提取所有轮廓，把它们组织成两级结构。</p>
<blockquote>
<div><p>第一级是连通域的外边界(external boundaries)，
第二级是孔边界(boundaries of holes)。如果在孔中间还有另外的连通域，则被当成另一个外边界</p>
</div></blockquote>
</div></blockquote>
<dl class="simple">
<dt>method:</dt><dd><p>CHAIN_APPROX_NONE  :存储所有的轮廓点
CHAIN_APPROX_SIMPLE:压缩水平，垂直和对角线段，只留下端点,例如矩形轮廓可以用4个点编码。</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>mask</strong> – 输入mask必须是二值Mask图像，注意黑色表示背景，白色表示物体，即在黑色背景里寻找白色物体的轮廓</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>contours List[np.ndarray(num_point,2)] 返回二值Mask图像的轮廓</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.flat_data">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">flat_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.flat_data" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_bbox_crop_padding">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_bbox_crop_padding</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbox</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_bbox_crop_padding" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>bbox</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_bbox_intersection">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_bbox_intersection</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_bbox_intersection" title="永久链接至目标">¶</a></dt>
<dd><p>计算两个boxes的交集坐标
:param rec1:
:param rec2:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_bboxes_crop_padding">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_bboxes_crop_padding</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bboxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_bboxes_crop_padding" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>bboxes</strong> – </p></li>
<li><p><strong>resize</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_bboxes_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_bboxes_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bboxes_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_bboxes_image" title="永久链接至目标">¶</a></dt>
<dd><p>获得裁剪区域
:param image:
:param bboxes_list:
:param resize_height:
:param resize_width:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_colors_color_map">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_colors_color_map</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nums</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_colors_color_map" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_contours_iou">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_contours_iou</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contour1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contour2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_contours_iou" title="永久链接至目标">¶</a></dt>
<dd><p>计算两个轮廓(多边形)交并比(Intersection-over-Union,IoU)
:param contour1: 多边形1 (num_points,2),由num_points个点构成的封闭多边形
:param contour2: 多边形2 (num_points,2),由num_points个点构成的封闭多边形
:param image_size: (W,H) image size,用于可视化,不会影响contours,iou的结果
:param plot: 是否可视化Mask
:return: contours: 多边形1和多边形2重叠区域</p>
<blockquote>
<div><p>iou: 多边形1和多边形2的交并比</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_image_block">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_image_block</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[3,</span> <span class="pre">3]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_image_block" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>grid</strong> – cell grid</p></li>
<li><p><strong>same</strong> – True : 保证每个cell的大小相同,会裁剪掉部分像素
same: False: 及可能每个cell的大小相同,边界的cell会偏大</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_image_tensor">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_image_tensor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transpose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_image_tensor" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_prewhiten_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_prewhiten_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_prewhiten_image" title="永久链接至目标">¶</a></dt>
<dd><p>图片白化处理
:param x:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_prewhiten_images">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_prewhiten_images</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_prewhiten_images" title="永久链接至目标">¶</a></dt>
<dd><p>批量白化图片处理
:param images_list:
:param normalization:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_rect_crop_padding">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_rect_crop_padding</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rect</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_rect_crop_padding" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>rect</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_rect_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_rect_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rect</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_rect_image" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>rect</strong> – [x,y,w,h]</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_rect_intersection">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_rect_intersection</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rec1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rec2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_rect_intersection" title="永久链接至目标">¶</a></dt>
<dd><p>计算两个rect的交集坐标
:param rec1:
:param rec2:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_rects_crop_padding">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_rects_crop_padding</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_rects_crop_padding" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>rects</strong> – </p></li>
<li><p><strong>resize</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_rects_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_rects_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rects_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_rects_image" title="永久链接至目标">¶</a></dt>
<dd><p>获得裁剪区域
:param image:
:param rects_list:
:param resize_height:
:param resize_width:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_square_bboxes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_square_bboxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bboxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'H'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_square_bboxes" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bboxes</strong> – </p></li>
<li><p><strong>fixed</strong> – (W)width (H)height,(L) longest edge</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_square_rects">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_square_rects</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'H'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_square_rects" title="永久链接至目标">¶</a></dt>
<dd><p>e.g.:
image_path = “../dataset/dataset/A/test1.jpg”
image = read_image(image_path, 400, 400)
rects = [[100, 50, 180, 50]]
print(rects)
rect_image = show_image_rects(“rect”, image, rects, waitKey=1)
rects2 = get_square_rects(rects, fixed=”h”)
# red is square_rects
rect_image = show_image_rects(“rect”, rect_image, rects2, color=(255, 0, 0), waitKey=0)
————————
:param rects:
:param fixed:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_video_capture">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_video_capture</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">video_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_video_capture" title="永久链接至目标">¶</a></dt>
<dd><blockquote>
<div><p>–   7W   Pix–&gt; width=320,height=240
–   30W  Pix–&gt; width=640,height=480
720P,100W Pix–&gt; width=1280,height=720
960P,130W Pix–&gt; width=1280,height=1024</p>
</div></blockquote>
<p>1080P,200W Pix–&gt; width=1920,height=1080
:param video_path:
:param width:
:param height:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_video_info">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_video_info</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">video_cap</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_video_info" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.get_video_writer">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">get_video_writer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fps</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.get_video_writer" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.image_base642rgb_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">image_base642rgb_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_base64</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.image_base642rgb_image" title="永久链接至目标">¶</a></dt>
<dd><p>將二进制字符串图像image_base64解码为正常形式
:param image_base64: 二进制字符串图像
:return: 返回RGB图像</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.image_boxes_resize_padding">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">image_boxes_resize_padding</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.image_boxes_resize_padding" title="永久链接至目标">¶</a></dt>
<dd><p>等比例图像resize,保持原始图像内容比，避免失真,短边会0填充
input_size = [300, 300]
image_path = “test.jpg”
src_boxes = [[8.20251, 1, 242.2412, 699.2236],</p>
<blockquote>
<div><p>[201.14865, 204.18265, 468.605, 696.36163]]</p>
</div></blockquote>
<p>src_boxes = np.asarray(src_boxes)
image = read_image(image_path)
image1, boxes1 = image_boxes_resize_padding(image, input_size, src_boxes)
image1 = show_image_boxes(“Det”, image1, boxes1, color=(255, 0, 0), waitKey=3)
boxes = image_boxes_resize_padding_inverse(image.shape, input_size, boxes1)
show_image_boxes(“image”, image, boxes)
:param size:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.image_boxes_resize_padding_inverse">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">image_boxes_resize_padding_inverse</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.image_boxes_resize_padding_inverse" title="永久链接至目标">¶</a></dt>
<dd><p>resize_image_padding的逆过程</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.image_clip">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">image_clip</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.image_clip" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>image</strong> – </p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.image_composite">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">image_composite</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bg_img</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(219,</span> <span class="pre">142,</span> <span class="pre">67)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.image_composite" title="永久链接至目标">¶</a></dt>
<dd><p>图像融合：合成图 = 前景*alpha+背景*(1-alpha)
<a class="reference external" href="https://blog.csdn.net/guduruyu/article/details/71439733">https://blog.csdn.net/guduruyu/article/details/71439733</a>
更有效的C++实现: <a class="reference external" href="https://www.aiuai.cn/aifarm1237.html">https://www.aiuai.cn/aifarm1237.html</a>
:param image: RGB图像(uint8)
:param alpha: 单通道的alpha图像(uint8)
:param bg_img: 背景图像,可以是任意的分辨率图像，也可以指定指定纯色的背景
:return: 返回与背景合成的图像</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.image_file_list2gif">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">image_file_list2gif</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_gif_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'test.gif'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.image_file_list2gif" title="永久链接至目标">¶</a></dt>
<dd><p>pip install imageio
uri：合成后的gif动图的名字，可以随意更改。
mode：操作模式，I表示多图，不用更改。
fps：帧率，也就是画面每秒传输帧数，值越大，gif动图的播放速度越大。
Usge:</p>
<blockquote>
<div><p>image_dir=”path/to/image-directory”
image_list = file_processing.get_files_lists(image_dir)
image_file_list2gif(image_list, out_gif_path=out_gif_path, fps=fps)</p>
</div></blockquote>
<p>:param file_list:图片列表
:param image_size:gif图片的大小
:param out_gif_path:
:param fps:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.image_fliplr">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">image_fliplr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.image_fliplr" title="永久链接至目标">¶</a></dt>
<dd><p>左右翻转
:param image:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.image_hstack">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">image_hstack</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.image_hstack" title="永久链接至目标">¶</a></dt>
<dd><p>图像左右拼接</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.image_list2gif">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">image_list2gif</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_gif_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'test.gif'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.image_list2gif" title="永久链接至目标">¶</a></dt>
<dd><p>pip install imageio
:param image_list:
:param image_size:
:param out_gif_path:
:param fps:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.image_normalization">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">image_normalization</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.image_normalization" title="永久链接至目标">¶</a></dt>
<dd><p>正则化，归一化
image[channel] = (image[channel] - mean[channel]) / std[channel]
:param image: numpy image
:param mean: [0.5,0.5,0.5]
:param std:  [0.5,0.5,0.5]
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.image_unnormalization">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">image_unnormalization</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.image_unnormalization" title="永久链接至目标">¶</a></dt>
<dd><p>正则化，归一化
image[channel] = (image[channel] - mean[channel]) / std[channel]
:param image: numpy image
:param mean: [0.5,0.5,0.5]
:param std:  [0.5,0.5,0.5]
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.image_vstack">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">image_vstack</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.image_vstack" title="永久链接至目标">¶</a></dt>
<dd><p>图像上下拼接</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.nms_bboxes_cv2">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">nms_bboxes_cv2</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bboxes_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scores_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">score_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nms_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.45</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.nms_bboxes_cv2" title="永久链接至目标">¶</a></dt>
<dd><p>NMS
fix a bug: cv2.dnn.NMSBoxe bboxes, scores params must be list and float data,can not be float32 or int
:param bboxes_list: [list[xmin,ymin,xmax,ymax],[],,,]
:param scores_list: [float,…]
:param labels_list: [int,…]
:param width:
:param height:
:param score_threshold:
:param nms_threshold:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.pil_paste_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">pil_paste_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_point</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.pil_paste_image" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> – </p></li>
<li><p><strong>mask</strong> – </p></li>
<li><p><strong>start_point</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.pointPolygonTest">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">pointPolygonTest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">point</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contour</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measureDist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.pointPolygonTest" title="永久链接至目标">¶</a></dt>
<dd><p>此功能可查找图像中的点与轮廓之间的最短距离.
当点在轮廓外时返回负值，当点在内部时返回正值，如果点在轮廓上则返回零
:param point: (x,y)
:param contour: np.asarray,(num_point,2)
:param measureDist: 如果为True，则查找签名距离(signed distance)</p>
<blockquote>
<div><p>如果为False，则查找该点是在内部还是外部或在轮廓上（它分别返回+1，-1,0）</p>
</div></blockquote>
<p>如您不想找到距离，请设置measureDist=False，因为这是一个耗时的过程. 因此，将其设为False可提供2-3倍的加速.
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.points2bbox">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">points2bbox</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keypoints</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.points2bbox" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.points_protection">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">points_protection</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.points_protection" title="永久链接至目标">¶</a></dt>
<dd><p>Avoid array overbounds
:param points:
:param height:
:param width:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.polygons2boxes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">polygons2boxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">polygons</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.polygons2boxes" title="永久链接至目标">¶</a></dt>
<dd><p>将多边形轮廓转转为矩形框
:param self:
:param polygons: [num_polygons,num_point,2]
:return: boxes:[num_polygons,4], box is [xmin, ymin, xmax, ymax]</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.post_process">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">post_process</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.post_process" title="永久链接至目标">¶</a></dt>
<dd><p>l2_norm
:param input:
:param axis:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.read_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">read_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_rgb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.read_image" title="永久链接至目标">¶</a></dt>
<dd><p>读取图片数据,默认返回的是uint8,[0,255]
:param filename:
:param resize_height:
:param resize_width:
:param normalization:是否归一化到[0.,1.0]
:param use_rgb 输出格式：RGB or BGR
:return: 返回的图片数据</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.read_image_base64">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">read_image_base64</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.read_image_base64" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.read_image_batch">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">read_image_batch</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.read_image_batch" title="永久链接至目标">¶</a></dt>
<dd><p>批量读取图片
:param image_list:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.read_image_gbk">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">read_image_gbk</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_rgb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.read_image_gbk" title="永久链接至目标">¶</a></dt>
<dd><p>解决imread不能读取中文路径的问题,读取图片数据,默认返回的是uint8,[0,255]
:param filename:
:param resize_height:
:param resize_width:
:param normalization:是否归一化到[0.,1.0]
:param use_rgb 输出格式：RGB or BGR
:return: 返回的RGB图片数据</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.read_image_pil">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">read_image_pil</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.read_image_pil" title="永久链接至目标">¶</a></dt>
<dd><p>读取图片数据,默认返回的是uint8,[0,255]
:param filename:
:param resize_height:
:param resize_width:
:param normalization:是否归一化到[0.,1.0]
:return: 返回的图片数据</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.read_images_url">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">read_images_url</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_rgb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'RGB'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.read_images_url" title="永久链接至目标">¶</a></dt>
<dd><p>根据url或者图片路径，读取图片
:param url:
:param resize_height:
:param resize_width:
:param normalization:
:param use_rgb:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.rects2bboxes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">rects2bboxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rects_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.rects2bboxes" title="永久链接至目标">¶</a></dt>
<dd><p>将rect=[x1,y1,w,h]转为bboxes=[x1,y1,x2,y2]
:param rects_list:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.requests_url">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">requests_url</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.requests_url" title="永久链接至目标">¶</a></dt>
<dd><p>读取网络数据流
:param url:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.resize_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">resize_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.resize_image" title="永久链接至目标">¶</a></dt>
<dd><p>tf.image.resize_images(images,size),images=[batch, height, width, channels],size=(new_height, new_width)
cv2.resize(image, dsize=(resize_width, resize_height)),与image.shape相反
images[50,10]与image.shape的原理相同，它表示的是image=(y=50,x=10)
:param image:
:param resize_height:
:param resize_width:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.resize_image_bboxes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">resize_image_bboxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resize_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bboxes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.resize_image_bboxes" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>resize_height</strong> – </p></li>
<li><p><strong>resize_width</strong> – </p></li>
<li><p><strong>bboxes</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.rgb_to_gray">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">rgb_to_gray</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.rgb_to_gray" title="永久链接至目标">¶</a></dt>
<dd><p>RGB to Gray image
:param image:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.save_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">save_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgb_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">toUINT8</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.save_image" title="永久链接至目标">¶</a></dt>
<dd><p>保存图片
:param image_path:
:param rgb_image:
:param toUINT8:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.save_image_lable_dir">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">save_image_lable_dir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.save_image_lable_dir" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.scale_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">scale_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.scale_image" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – </p></li>
<li><p><strong>scale</strong> – (scale_w,scale_h)</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.scale_rect">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">scale_rect</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_rect</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_shape</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.scale_rect" title="永久链接至目标">¶</a></dt>
<dd><p>对图像进行缩放时，对应的rectangle也要进行缩放
:param orig_rect: 原始图像的rect=[x,y,w,h]
:param orig_shape: 原始图像的维度shape=[h,w]
:param dest_shape: 缩放后图像的维度shape=[h,w]
:return: 经过缩放后的rectangle</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.show_batch_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">show_batch_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.show_batch_image" title="永久链接至目标">¶</a></dt>
<dd><p>批量显示图片
:param title:
:param batch_images:
:param index:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.show_boxList">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">show_boxList</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">win_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxList</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgb_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waitKey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.show_boxList" title="永久链接至目标">¶</a></dt>
<dd><p>[xmin,ymin,xmax,ymax]
:param win_name:
:param boxList:
:param rgb_image:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.show_image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">show_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgb_image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.show_image" title="永久链接至目标">¶</a></dt>
<dd><p>调用matplotlib显示RGB图片
:param title: 图像标题
:param rgb_image: 图像的数据
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.show_image_bboxes_text">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">show_image_bboxes_text</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgb_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxes_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drawType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'custom'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waitKey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.show_image_bboxes_text" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes_name</strong> – </p></li>
<li><p><strong>bgr_image</strong> – bgr image</p></li>
<li><p><strong>color</strong> – BGR color:[B,G,R]</p></li>
<li><p><strong>boxes</strong> – [[x1,y1,x2,y2],[x1,y1,x2,y2]]</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.show_image_boxes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">show_image_boxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">win_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxes_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">255)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waitKey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.show_image_boxes" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>win_name</strong> – </p></li>
<li><p><strong>image</strong> – </p></li>
</ul>
</dd>
</dl>
<p>:param boxes_list:[[ x1, y1, x2, y2],[ x1, y1, x2, y2]]
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.show_image_detection_bboxes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">show_image_detection_bboxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgb_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bboxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waitKey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.show_image_detection_bboxes" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.show_image_detection_rects">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">show_image_detection_rects</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgb_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waitKey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.show_image_detection_rects" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> – </p></li>
<li><p><strong>rgb_image</strong> – </p></li>
<li><p><strong>rects</strong> – [[x1,y1,w,h],[x1,y1,w,h]]</p></li>
<li><p><strong>probs</strong> – </p></li>
<li><p><strong>lables</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.show_image_rects">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">show_image_rects</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">win_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rect_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">255)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waitKey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.show_image_rects" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>win_name</strong> – </p></li>
<li><p><strong>image</strong> – </p></li>
</ul>
</dd>
</dl>
<p>:param rect_list:[[ x, y, w, h],[ x, y, w, h]]
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.show_image_rects_text">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">show_image_rects_text</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgb_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rects_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drawType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'custom'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waitKey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.show_image_rects_text" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rects_name</strong> – </p></li>
<li><p><strong>bgr_image</strong> – bgr image</p></li>
<li><p><strong>rects</strong> – [[x1,y1,w,h],[x1,y1,w,h]]</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.show_images_list">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">show_images_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">images_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waitKey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.show_images_list" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.show_landmark">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">show_landmark</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">win_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">landmarks_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vis_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waitKey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.show_landmark" title="永久链接至目标">¶</a></dt>
<dd><p>显示landmark和boxex
:param win_name:
:param image:
:param landmarks_list: [[x1, y1], [x2, y2]]
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.show_landmark_boxes">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">show_landmark_boxes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">win_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">landmarks_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.show_landmark_boxes" title="永久链接至目标">¶</a></dt>
<dd><p>显示landmark和boxex
:param win_name:
:param image:
:param landmarks_list: [[x1, y1], [x2, y2]]
:param boxes:     [[ x1, y1, x2, y2],[ x1, y1, x2, y2]]
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.softmax">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">softmax</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.softmax" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.tensor2image">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">tensor2image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch_tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.tensor2image" title="永久链接至目标">¶</a></dt>
<dd><p>convert tensor to image
:param batch_tensor:
:param index:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.transpose">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">transpose</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.transpose" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.image_utils.untranspose">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.image_utils.</span></code><code class="sig-name descname"><span class="pre">untranspose</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.image_utils.untranspose" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-basetrainer.utils.log">
<span id="basetrainer-utils-log-module"></span><h2>basetrainer.utils.log module<a class="headerlink" href="#module-basetrainer.utils.log" title="永久链接至标题">¶</a></h2>
<p># ——————————————————–
# &#64;Author : panjq
# &#64;Date   : 2019-9-20 13:18:34
# ——————————————————–</p>
<dl class="py function">
<dt id="basetrainer.utils.log.CustomLogger">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.log.</span></code><code class="sig-name descname"><span class="pre">CustomLogger</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.log.CustomLogger" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="basetrainer.utils.log.FileHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">basetrainer.utils.log.</span></code><code class="sig-name descname"><span class="pre">FileHandler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">when</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'h'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backupCount</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">utc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">atTime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.log.FileHandler" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal notranslate"><span class="pre">logging.handlers.TimedRotatingFileHandler</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.log.RUN_TIME">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.log.</span></code><code class="sig-name descname"><span class="pre">RUN_TIME</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deta_time</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.log.RUN_TIME" title="永久链接至目标">¶</a></dt>
<dd><p>计算时间差，返回毫秒,deta_time.seconds获得秒数=1000ms，deta_time.microseconds获得微妙数=1/1000ms
:param deta_time: ms
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.log.TIME">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.log.</span></code><code class="sig-name descname"><span class="pre">TIME</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.log.TIME" title="永久链接至目标">¶</a></dt>
<dd><p>获得当前时间
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.log.get_logger">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.log.</span></code><code class="sig-name descname"><span class="pre">get_logger</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LOG'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'debug'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.log.get_logger" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.log.memory_test">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.log.</span></code><code class="sig-name descname"><span class="pre">memory_test</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.log.memory_test" title="永久链接至目标">¶</a></dt>
<dd><blockquote>
<div><p>1.先导入：
&gt; from memory_profiler import profile
2.函数前加装饰器：
&gt; &#64;profile(precision=4,stream=open(‘memory_profiler.log’,’w+’))</p>
</div></blockquote>
<p>参数含义：precision:精确到小数点后几位
stream:此模块分析结果保存到 ‘memory_profiler.log’ 日志文件。如果没有此参数，分析结果会在控制台输出</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">return</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.log.print_args">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.log.</span></code><code class="sig-name descname"><span class="pre">print_args</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.log.print_args" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.log.run_time_decorator">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.log.</span></code><code class="sig-name descname"><span class="pre">run_time_decorator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.log.run_time_decorator" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.log.set_logger">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.log.</span></code><code class="sig-name descname"><span class="pre">set_logger</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LOG'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'debug'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_main_process</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.log.set_logger" title="永久链接至目标">¶</a></dt>
<dd><p>logger = set_logging(name=”LOG”, level=”debug”, logfile=”log.txt”, format=False)
url:https://cuiqingcai.com/6080.html
level级别：debug&gt;info&gt;warning&gt;error&gt;critical
:param level: 设置log输出级别
:param logfile: log保存路径，如果为None，则在控制台打印log
:param is_main_process: 是否是主进程
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.log.singleton">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.log.</span></code><code class="sig-name descname"><span class="pre">singleton</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.log.singleton" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-basetrainer.utils.plot_utils">
<span id="basetrainer-utils-plot-utils-module"></span><h2>basetrainer.utils.plot_utils module<a class="headerlink" href="#module-basetrainer.utils.plot_utils" title="永久链接至标题">¶</a></h2>
<p>&#64;Project: python-learning-notes
&#64;File   : plot_utils.py
&#64;Author : panjq
&#64;E-mail : <a class="reference external" href="mailto:pan_jinquan&#37;&#52;&#48;163&#46;com">pan_jinquan<span>&#64;</span>163<span>&#46;</span>com</a>
&#64;Date   : 2019-07-13 16:30:10</p>
<dl class="py function">
<dt id="basetrainer.utils.plot_utils.demo">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.plot_utils.</span></code><code class="sig-name descname"><span class="pre">demo</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.plot_utils.demo" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.plot_utils.demo_for_skew_kurt">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.plot_utils.</span></code><code class="sig-name descname"><span class="pre">demo_for_skew_kurt</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.plot_utils.demo_for_skew_kurt" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference external" href="https://blog.csdn.net/u012735708/article/details/84750295">https://blog.csdn.net/u012735708/article/details/84750295</a>
计算偏度(skew)和峰度(kurt)
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.plot_utils.plot_bar">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.plot_utils.</span></code><code class="sig-name descname"><span class="pre">plot_bar</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlabel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylabel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isshow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.plot_utils.plot_bar" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.plot_utils.plot_multi_line">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.plot_utils.</span></code><code class="sig-name descname"><span class="pre">plot_multi_line</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_data_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_data_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylabel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.plot_utils.plot_multi_line" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.plot_utils.plot_skew_kurt">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.plot_utils.</span></code><code class="sig-name descname"><span class="pre">plot_skew_kurt</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Title'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.plot_utils.plot_skew_kurt" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference external" href="https://blog.csdn.net/u012735708/article/details/84750295">https://blog.csdn.net/u012735708/article/details/84750295</a>
计算偏度(skew)和峰度(kurt)
:return:</p>
</dd></dl>

</div>
<div class="section" id="module-basetrainer.utils.setup_config">
<span id="basetrainer-utils-setup-config-module"></span><h2>basetrainer.utils.setup_config module<a class="headerlink" href="#module-basetrainer.utils.setup_config" title="永久链接至标题">¶</a></h2>
<p>提供工具函数的模块</p>
<dl class="py class">
<dt id="basetrainer.utils.setup_config.Dict2Obj">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">basetrainer.utils.setup_config.</span></code><code class="sig-name descname"><span class="pre">Dict2Obj</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.setup_config.Dict2Obj" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>dict转类对象</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.setup_config.easy2dict">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.setup_config.</span></code><code class="sig-name descname"><span class="pre">easy2dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">easydict.EasyDict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.setup_config.easy2dict" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>config</strong> – EasyDict参数</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.setup_config.load_config">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.setup_config.</span></code><code class="sig-name descname"><span class="pre">load_config</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'config.yaml'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.setup_config.load_config" title="永久链接至目标">¶</a></dt>
<dd><p>读取配置文件，并返回一个python dict 对象
:param config_file: 配置文件路径
:return: python dict 对象</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.setup_config.parser_config">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.setup_config.</span></code><code class="sig-name descname"><span class="pre">parser_config</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">argparse.Namespace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfg_updata</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.setup_config.parser_config" title="永久链接至目标">¶</a></dt>
<dd><p>解析并合并配置参数：(1)命令行argparse (2)使用*.yaml配置文件
:param args: 命令行参数
:param cfg_updata:True: 合并配置参数时，相同参数由*.yaml文件参数决定</p>
<blockquote>
<div><p>False: 合并配置参数时，相同参数由命令行argparse参数决定</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">返回</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.setup_config.parser_config_file">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.setup_config.</span></code><code class="sig-name descname"><span class="pre">parser_config_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">easydict.EasyDict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_file</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfg_updata</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.setup_config.parser_config_file" title="永久链接至目标">¶</a></dt>
<dd><p>解析并合并配置参数
:param config: EasyDict参数
:param cfg_updata:True: 合并配置参数时，相同参数由config参数决定</p>
<blockquote>
<div><p>False: 合并配置参数时，相同参数由config_file中的参数决定</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">返回</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.setup_config.parser_config_name">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.setup_config.</span></code><code class="sig-name descname"><span class="pre">parser_config_name</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">join</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'_'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.setup_config.parser_config_name" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – config</p></li>
<li><p><strong>key</strong> – </p></li>
</ul>
</dd>
</dl>
<p>:param join:拼接方式，为空返回list
:return: List or String</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.setup_config.parser_work_space">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.setup_config.</span></code><code class="sig-name descname"><span class="pre">parser_work_space</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.setup_config.parser_work_space" title="永久链接至目标">¶</a></dt>
<dd><p>生成工程空间
flag = [cfg.net_type, cfg.width_mult, cfg.input_size[0], cfg.input_size[1],</p>
<blockquote>
<div><p>cfg.loss_type, cfg.optim_type, flag, file_utils.get_time()]</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.setup_config.print_dict">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.setup_config.</span></code><code class="sig-name descname"><span class="pre">print_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dict_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.setup_config.print_dict" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.setup_config.save_config">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.setup_config.</span></code><code class="sig-name descname"><span class="pre">save_config</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'config.yaml'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.setup_config.save_config" title="永久链接至目标">¶</a></dt>
<dd><p>保存yaml文件</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.setup_config.update_dict">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.setup_config.</span></code><code class="sig-name descname"><span class="pre">update_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfg2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.setup_config.update_dict" title="永久链接至目标">¶</a></dt>
<dd><p>相同参数由后面的cfg2决定</p>
</dd></dl>

</div>
<div class="section" id="module-basetrainer.utils.summary">
<span id="basetrainer-utils-summary-module"></span><h2>basetrainer.utils.summary module<a class="headerlink" href="#module-basetrainer.utils.summary" title="永久链接至标题">¶</a></h2>
<p>&#64;Author : panjq
&#64;E-mail : <a class="reference external" href="mailto:pan_jinquan&#37;&#52;&#48;163&#46;com">pan_jinquan<span>&#64;</span>163<span>&#46;</span>com</a>
&#64;Date   : 2021-07-02 14:59:42</p>
<dl class="py class">
<dt id="basetrainer.utils.summary.SummaryWriter">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">basetrainer.utils.summary.</span></code><code class="sig-name descname"><span class="pre">SummaryWriter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_dir</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.summary.SummaryWriter" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="basetrainer.utils.summary.SummaryWriter.add_image">
<code class="sig-name descname"><span class="pre">add_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.summary.SummaryWriter.add_image" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="basetrainer.utils.summary.SummaryWriter.add_scalar">
<code class="sig-name descname"><span class="pre">add_scalar</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.summary.SummaryWriter.add_scalar" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="basetrainer.utils.summary.SummaryWriter.add_scalars">
<code class="sig-name descname"><span class="pre">add_scalars</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.summary.SummaryWriter.add_scalars" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-basetrainer.utils.torch_data">
<span id="basetrainer-utils-torch-data-module"></span><h2>basetrainer.utils.torch_data module<a class="headerlink" href="#module-basetrainer.utils.torch_data" title="永久链接至标题">¶</a></h2>
<p>&#64;Author : panjq
&#64;E-mail : <a class="reference external" href="mailto:pan_jinquan&#37;&#52;&#48;163&#46;com">pan_jinquan<span>&#64;</span>163<span>&#46;</span>com</a>
&#64;Date   : 2021-07-30 17:04:51</p>
<dl class="py function">
<dt id="basetrainer.utils.torch_data.build_dataloader">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_data.</span></code><code class="sig-name descname"><span class="pre">build_dataloader</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">torch.utils.data.dataset.Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persistent_workers</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phase</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distributed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">torch.utils.data.dataloader.DataLoader</span><a class="headerlink" href="#basetrainer.utils.torch_data.build_dataloader" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> – Dataset</p></li>
<li><p><strong>batch_size</strong> – </p></li>
<li><p><strong>num_workers</strong> – </p></li>
<li><p><strong>shuffle</strong> – </p></li>
<li><p><strong>persistent_workers</strong> – 该参数仅支持torch&gt;=1.6
False: 数据加载器运行完一个Epoch后会关闭worker进程,在分布式训练，会出现每个epoch初始化多进程的问题
True: 会保持worker进程实例激活状态,容易出现“DataLoader worker (pid(s) 953) exited unexpectedly”的错误</p></li>
<li><p><strong>phase</strong> – “train”, “test”, “val”</p></li>
<li><p><strong>distributed</strong> – True: use DDP; False: use DP (是否使用分布式训练)</p></li>
<li><p><strong>kwargs</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_data.build_model_parallel">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_data.</span></code><code class="sig-name descname"><span class="pre">build_model_parallel</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">torch.nn.modules.module.Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distributed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">torch.nn.modules.module.Module</span><a class="headerlink" href="#basetrainer.utils.torch_data.build_model_parallel" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – </p></li>
<li><p><strong>device_ids</strong> – </p></li>
<li><p><strong>distributed</strong> – True: use DDP; False: use DP (是否使用分布式训练)</p></li>
<li><p><strong>kwargs</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-basetrainer.utils.torch_tools">
<span id="basetrainer-utils-torch-tools-module"></span><h2>basetrainer.utils.torch_tools module<a class="headerlink" href="#module-basetrainer.utils.torch_tools" title="永久链接至标题">¶</a></h2>
<p># ——————————————————–
# &#64;Author : panjq
# &#64;E-mail : <a class="reference external" href="mailto:pan_jinquan&#37;&#52;&#48;163&#46;com">pan_jinquan<span>&#64;</span>163<span>&#46;</span>com</a>
# &#64;Date   : 2020-06-02 16:00:47
# ——————————————————–</p>
<dl class="py function">
<dt id="basetrainer.utils.torch_tools.freeze_net_layers">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">freeze_net_layers</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">net</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.freeze_net_layers" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference external" href="https://www.zhihu.com/question/311095447/answer/589307812">https://www.zhihu.com/question/311095447/answer/589307812</a>
.. rubric:: 示例</p>
<p>freeze_net_layers(net.base_net)
freeze_net_layers(net.source_layer_add_ons)
freeze_net_layers(net.extras)</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>net</strong> – </p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.get_device">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">get_device</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.get_device" title="永久链接至目标">¶</a></dt>
<dd><p>返回当前设备索引
torch.cuda.current_device()
返回GPU的数量
torch.cuda.device_count()
返回gpu名字，设备索引默认从0开始
torch.cuda.get_device_name(0)
cuda是否可用
torch.cuda.is_available()
==========
CUDA_VISIBLE_DEVICES=4,5,6 python train.py</p>
<p>Usage:
gpu_id = get_device()
model = build_model()
model.cuda()
model = torch.nn.DataParallel(model, device_ids=gpu_id)
…
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.get_distributed_sampler">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">get_distributed_sampler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">torch.utils.data.dataset.Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">world_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.get_distributed_sampler" title="永久链接至目标">¶</a></dt>
<dd><p class="rubric">示例</p>
<p>sampler = DistributedSampler(dataset) if is_distributed else None
loader = DataLoader(dataset, shuffle=(sampler is None),</p>
<blockquote>
<div><p>sampler=sampler)</p>
</div></blockquote>
<dl>
<dt>for epoch in range(start_epoch, n_epochs):</dt><dd><dl class="simple">
<dt>if is_distributed:</dt><dd><p>sampler.set_epoch(epoch)</p>
</dd>
</dl>
<p>train(loader)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> – </p></li>
<li><p><strong>world_size</strong> – </p></li>
<li><p><strong>rank</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.get_loacl_eth">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">get_loacl_eth</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.get_loacl_eth" title="永久链接至目标">¶</a></dt>
<dd><p>想要获取linux设备网卡接口，并用列表进行保存
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.get_module_state_dict">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">get_module_state_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.get_module_state_dict" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>state_dict</strong> – </p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.get_torch_version">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">get_torch_version</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.get_torch_version" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.load_pretrained_model">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">load_pretrained_model</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ckpt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.load_pretrained_model" title="永久链接至目标">¶</a></dt>
<dd><p>Loads pretrianed weights to model.
Features:只会加载完全匹配的模型参数，不匹配的模型将会忽略</p>
<blockquote>
<div><ul class="simple">
<li><p>Incompatible layers (unmatched in name or size) will be ignored.</p></li>
<li><p>Can automatically deal with keys containing “module.”.</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>nn.Module</em>) – network model.</p></li>
<li><p><strong>ckpt</strong> (<em>str</em>) – OrderedDict or model file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.load_state_dict">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">load_state_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.load_state_dict" title="永久链接至目标">¶</a></dt>
<dd><dl class="simple">
<dt>Usage:</dt><dd><p>model=Model()
state_dict = torch_tools.load_state_dict(model_path, module=False)
model.load_state_dict(state_dict)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>model_path</strong> – </p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>state_dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.model_forward">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">model_forward</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cpu'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.model_forward" title="永久链接至目标">¶</a></dt>
<dd><p>input_shape=(batch_size, 3, input_size[0], input_size[1])
:param model:
:param input_shape:
:param device:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.nni_summary_model">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">nni_summary_model</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[112,</span> <span class="pre">112]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cpu'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.nni_summary_model" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference external" href="https://nni.readthedocs.io/zh/stable/Compression/CompressionUtils.html">https://nni.readthedocs.io/zh/stable/Compression/CompressionUtils.html</a>
NNI 提供了模型计数器，用于计算模型的 FLOPs 和参数。
此计数器支持计算没有掩码模型的 FLOPs、参数，也可以计算有掩码模型的 FLOPs、参数，
这有助于在模型压缩过程中检查模型的复杂度。
注意，对于结构化的剪枝，仅根据掩码来标识保留的滤波器，不会考虑剪枝的输入通道，
因此，计算出的 FLOPs 会比实际数值要大（即，模型加速后的计算值）。
我们支持两种模式来收集模块信息。 第一种是 default 模式，它只采集卷积操作和线性操作的信息。
第二种是 full 模式，它还会收集其他操作的信息。 用户可以轻松地使用我们收集的 results 进行进一步的分析。
:param model:
:param batch_size:
:param input_size:
:param plot:
:param device:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.plot_model">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">plot_model</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.plot_model" title="永久链接至目标">¶</a></dt>
<dd><p>Usage:
output = model(inputs)
vis_graph = make_dot(output, params=dict(model.named_parameters()))
vis_graph.view()
=================================================================
output/input_shape至少已知一个
:param model:
:param output:
:param input_shape: (batch_size, 3, input_size[0], input_size[1])
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.print_model">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">print_model</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.print_model" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>model</strong> – </p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.set_distributed_env">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">set_distributed_env</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">backend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nccl'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'env://'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.set_distributed_env" title="永久链接至目标">¶</a></dt>
<dd><p>initialize the distributed environment
:param backend:
:param init_method:
:return: world_size :参与工作的进程数</p>
<blockquote>
<div><p>rank: 当前进程的rank(这个Worker是全局第几个Worker)
local_rank：这个Worker是这台机器上的第几个Worker</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.set_env_random_seed">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">set_env_random_seed</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2020</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.set_env_random_seed" title="永久链接至目标">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>seed</strong> – </p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.set_node_env">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">set_node_env</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">master_addr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'localhost'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">master_port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'1200'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eth_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.set_node_env" title="永久链接至目标">¶</a></dt>
<dd><p>设置多卡训练的节点信息
parser = argparse.ArgumentParser(description=”for face verification train”)
parser.add_argument(“-c”, “–config”, help=”configs file”, default=”configs/config_distributed.yaml”, type=str)
parser.add_argument(“-e”, ‘–eth_name’, type=str, default=None, help=”set eth name”)
parser.add_argument(“-a”, ‘–master_addr’, type=str, default=’localhost’, help=”set master node address”)
parser.add_argument(“-p”, ‘–master_port’, type=str, default=’1200’, help=”set master node port”)
parser.add_argument(“–local_rank”, type=int, default=0, help=”torch.distributed.launch会给模型分配一个args.local_rank的参数，”</p>
<blockquote>
<div><p>“也可以通过torch.distributed.get_rank()获取进程id”)</p>
</div></blockquote>
<p>parser.add_argument(“–init_method”, type=str, default=”env://”)
args = parser.parse_args()
====================================
:param master_addr: 主节点地址,default localhost
:param master_port: 主节点接口,default 1200
:param eth_name: 网卡名称，None会自动获取
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.summary_model">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">summary_model</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[112,</span> <span class="pre">112]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cpu'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.summary_model" title="永久链接至目标">¶</a></dt>
<dd><p>—-This tools can show—-
Total params: 359,592
Total memory: 47.32MB
Total MAdd: 297.37MMAdd
Total Flops: 153.31MFlops
Total MemR+W: 99.7MB
====================================================
<a class="reference external" href="https://www.cnblogs.com/xuanyuyt/p/12653041.html">https://www.cnblogs.com/xuanyuyt/p/12653041.html</a>
Total number of network parameters (params)
Theoretical amount of floating point arithmetics (FLOPs)
Theoretical amount of multiply-adds (MAdd MACC) (乘加运算)
Memory usage (memory)
MACCs：是multiply-accumulate operations，指点积运算， 一个 macc = 2FLOPs
FLOPs 的全称是 floating points of operations，即浮点运算次数，用来衡量模型的计算复杂度。
计算 FLOPs 实际上是计算模型中乘法和加法的运算次数。
卷积层的浮点运算次数不仅取决于卷积核的大小和输入输出通道数，还取决于特征图的大小；
而全连接层的浮点运算次数和参数量是相同的。
====================================================
:param model:
:param batch_size:
:param input_size:
:param plot: plot model
:param device:
:return:</p>
</dd></dl>

<dl class="py function">
<dt id="basetrainer.utils.torch_tools.torchinfo_summary">
<code class="sig-prename descclassname"><span class="pre">basetrainer.utils.torch_tools.</span></code><code class="sig-name descname"><span class="pre">torchinfo_summary</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[112,</span> <span class="pre">112]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cpu'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#basetrainer.utils.torch_tools.torchinfo_summary" title="永久链接至目标">¶</a></dt>
<dd><p>—-This tools can show—-
Total params: 359,592
Total memory: 47.32MB
Total MAdd: 297.37MMAdd
Total Flops: 153.31MFlops
Total MemR+W: 99.7MB
====================================================
<a class="reference external" href="https://www.cnblogs.com/xuanyuyt/p/12653041.html">https://www.cnblogs.com/xuanyuyt/p/12653041.html</a>
Total number of network parameters (params)
Theoretical amount of floating point arithmetics (FLOPs)
Theoretical amount of multiply-adds (MAdd MACC) (乘加运算)
Memory usage (memory)
MACCs：是multiply-accumulate operations，指点积运算， 一个 macc = 2FLOPs
FLOPs 的全称是 floating points of operations，即浮点运算次数，用来衡量模型的计算复杂度。
计算 FLOPs 实际上是计算模型中乘法和加法的运算次数。
卷积层的浮点运算次数不仅取决于卷积核的大小和输入输出通道数，还取决于特征图的大小；
而全连接层的浮点运算次数和参数量是相同的。
====================================================
:param model:
:param batch_size:
:param input_size:
:param plot: plot model
:param device:
:return:</p>
</dd></dl>

</div>
<div class="section" id="module-basetrainer.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-basetrainer.utils" title="永久链接至标题">¶</a></h2>
<p>&#64;Author : panjq
&#64;E-mail : <a class="reference external" href="mailto:pan_jinquan&#37;&#52;&#48;163&#46;com">pan_jinquan<span>&#64;</span>163<span>&#46;</span>com</a>
&#64;Date   : 2021-07-28 08:57:17</p>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; 版权所有 2022, panjinquan.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>